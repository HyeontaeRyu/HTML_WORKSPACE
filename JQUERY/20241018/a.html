<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <script src="/jquery-3.7.1.js"></script>
    <link rel="stylesheet" href="a.css" />
    <script>
      $(function () {
        let collapsibleCount = $(".collapsible").length;

        for (let i = 0; i < collapsibleCount; i++) {
          $(".collapsible:eq(" + i + ") > .content").load($(".collapsible:eq(" + i + ") .title a").attr("href"));
        }

        $(".collapsible:eq(0) > a").addClass("selected");
        $(".collapsible").not(":eq(0)").find(".content").hide();

        // $(".collapsible:eq(0) > .content").load($(".collapsible:eq(0) .title a").attr("href"));
        // $(".collapsible:eq(1) > .content").load($(".collapsible:eq(1) .title a").attr("href"));
        // $(".collapsible:eq(2) > .content").load($(".collapsible:eq(2) .title a").attr("href"));

        // 링크에 대한 클릭 이벤트 처리
        $(".collapsible .title a").click(function () {
          $(this).toggleClass("selected");
          $(".collapsible .title a").not(this).removeClass("selected");

          // 펼칠 대상 검색
          let target = $(this).parents(".collapsible").find(".content");

          // 나머지 대상
          let other = $(".collapsible .title a").not(this).parents(".collapsible").find(".content");

          // 애니메이션 적용
          target.slideToggle(300);

          // 나머지 닫기
          //   other.slideUp(300);

          // 현재 클릭된 항목에 대한 내용이 열려진 상태라면 내용을 load() 함수로 불러와서 출력
          /* 
          if (target.css("display") != "none") {
            target.load($(this).attr("href"));
          }
          */

          // 링크 작동 중지
          return false;
        });
      });
    </script>
  </head>
  <body>
    <h1>accordion</h1>
    <ul>
      <li class="collapsible">
        <h2 class="title"><a href="./txt/HTML5.txt">HTML5</a></h2>
        <p class="content"></p>
      </li>
      <li class="collapsible">
        <h2 class="title"><a href="./txt/JQuery.txt">JQuery</a></h2>
        <p class="content"></p>
      </li>
      <li class="collapsible">
        <h2 class="title"><a href="./txt/Bootstrap.txt">Bootstrap</a></h2>
        <p class="content"></p>
      </li>
    </ul>
  </body>
</html>
